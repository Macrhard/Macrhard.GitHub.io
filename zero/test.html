<!DOCTYPE html>
<html>
	<head>
		<!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			* {margin: 0;padding: 0;}
			body {width: 100%;height: 100%;overflow:scroll;overflow-x:hidden;overflow-y:hidden;}
			#back {display: block;width: 100%;height: 100%;display: none;z-index: 1;}
			#box {width: 200px;height: 200px;border: 5px solid red;margin: 300px auto;line-height: 200px;
			text-align: center;font-size: 66px;display: none;}
			#start {display: block;width: 120px;height: 80px;line-height: 80px;text-align: center;
			font-size: 24px;position: absolute;}
			#cont {width: 1400px;height: 800px;border: solid 5px black;margin: 0 auto;
			background: black;position: relative;overflow: hidden;display: none;}
			.bigfire {width: 8px;height: 15px;position: absolute;border-radius: 8px 8px 30px 30px;}
			.smallfire {width: 10px;height: 10px;position: absolute;border-radius: 50%;}
			span {display: block;width: 200px;height: 200px;line-height: 200px;text-align: center;
			font-size: 88px;z-index: 5;color: #E84A7E;display: none;font-family: "楷体";}
			#one {position: absolute;right: 100px;top: 50px;}
			#two {position: absolute;right: 100px;top: 200px;}
			#three {position: absolute;right: 100px;top: 350px;}
			#four {position: absolute;right: 100px;top: 500px;}
			em {width: 100px;height: 100px;line-height: 100px;text-align: center;font-size: 36px;font-style: normal;
			display: block;position: absolute;color: #E84A7E;font-family: "楷体";right: 135px;top: 25px;
			display: none;}
		</style><!-- hexo-inject:begin --><!-- hexo-inject:end -->
	</head>
	<body>
		<!-- hexo-inject:begin --><!-- hexo-inject:end --><em id="zero">致：</em>
		<span id="one">一</span>
		<span id="two">生</span>
		<span id="three">所</span>
		<span id="four">爱</span>
		<img src="bg.jpg" id="back"/>
		<div id="box">3</div>
		<div id="cont">
			
		</div>
		<input type="button" name="start" id="start" value="准备好了" />
		<!--<audio src="C:/Users/Administrator/Desktop/love.mp3"></audio>-->
		<audio id="p3" autoplay="autoplay">
		  <!--<source src="horse.ogg" type="audio/ogg">-->
		  <!--<source src="love.mp3" type="audio/mpeg">-->
		  <!--您的浏览器不支持 audio 元素。-->
		</audio><!-- hexo-inject:begin --><!-- hexo-inject:end -->
	</body>
	<script src="jquery-3.3.1.js" type="text/javascript" charset="utf-8"></script>
	<script src="tool.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript">
		var oStart=document.getElementById("start");
		var screenW=document.documentElement.clientWidth || document.body.clientWidth ;
		var screenH=document.documentElement.clientHeight || document.body.clientHeight ;
		var json=[{"left":700,"top":250},{"left":700,"top":200},{"left":700,"top":150},{"left":700,"top":300},
		{"left":700,"top":200},{"left":700,"top":300},{"left":700,"top":200},{"left":700,"top":300},
		{"left":700,"top":200},{"left":700,"top":180},{"left":700,"top":200},{"left":700,"top":300},
		{"left":700,"top":300},{"left":700,"top":200},{"left":700,"top":150},{"left":700,"top":250},
		{"left":700,"top":200},{"left":700,"top":230},{"left":700,"top":210},{"left":700,"top":300}
		]
		var json2=[{"left":150,"top":260},{"left":300,"top":260},{"left":450,"top":260},{"left":600,"top":260},
		{"left":750,"top":260},{"left":900,"top":260},{"left":1050,"top":260},{"left":1200,"top":260}]
		oStart.style.left=(screenW-oStart.offsetWidth)/2+"px";
		oStart.style.top=(screenH-oStart.offsetHeight)/2+"px";
		oStart.onclick=function(){
			setTimeout(function(){
				document.getElementById("p3").src="love.mp3";
			},5100)
			oStart.style.display="none";
			new Fire();
			
		}
		function Fire (obj){
			this.oBox=document.getElementById("box");
			this.oCont=document.getElementById("cont");
			this.timer1=null;
			this.timer2=null;
			this.init();
		}
		
		Fire.prototype.init=function(){
			var that=this;
			clearInterval(this.timer1);
			this.oBox.style.display="block";
            this.timer1=setInterval(function(){
            	that.oBox.innerHTML--;
            	if(that.oBox.innerHTML==0){
            		clearInterval(that.timer1);
            		that.oBox.style.display="none";
            		that.cont();
            	}
            },1000)
		}
		
		Fire.prototype.cont=function(){
			var that=this;
			var a=0;
			var r=Math.round(Math.random()*100+100);    //小烟花半径
			timer2=setInterval(function(){
				if(a==json.length-1){
				    clearInterval(timer2);
				    that.zuhe();
				}else{
            $("#cont").fadeIn(1000);
			that.bgf=document.createElement("div");
			that.bgf.style.bottom=0;
			that.bgf.className="bigfire";
			that.bgf.style.background=randomColor();
			that.oCont.appendChild(that.bgf);
	        that.bgf.style.left=json[a].left+"px";
            move(that.bgf,{"top":json[a].top})
            setTimeout(function(){
            	that.bgf.remove();
        	for(var i=0;i<12;i++){
//      		console.log(1)
        		let smf=document.createElement("div");
        		smf.style.background=randomColor();
        		smf.className="smallfire";
        		smf.style.left=json[a].left+"px";
        		smf.style.top=json[a].top+"px";
        		that.oCont.appendChild(smf);
        	var lt = Math.round(Math.cos(Math.PI/180*30*i)*r) + json[a].left;   //小烟花成圆形运动
			var tp = Math.round(Math.sin(Math.PI/180*30*i)*r) + json[a].top;
			move(smf,{"left":lt,"top":tp},function(){
					smf.remove();
					
				})
        	}
        	a++;
            },900);
				}
			},3000)
			
		}
		
		Fire.prototype.zuhe=function(){
			var r=Math.round(Math.random()*100+100);    //小烟花半径
			var that=this;
			var index=0;
			setTimeout(function(){
				
			for(let i=0;i<json2.length;i++){
			that.bgf=document.createElement("div");
			that.bgf.style.bottom=0;
			that.bgf.className="bigfire";
			that.bgf.style.background=randomColor();
			that.oCont.appendChild(that.bgf);
	        that.bgf.style.left=json2[i].left+"px";
            move(that.bgf,{"top":json2[i].top},function(){
            })

            var big=document.getElementsByClassName("bigfire");
            setTimeout(function(){
            	big[0].remove();
            	$("#cont").fadeOut(5000);
            	setTimeout(function(){
            		$("#back").fadeIn(1000);            		
            	},3000)
            	
            	setTimeout(function(){
            		$("#zero").fadeIn(1000);
            	},1000)
            	setTimeout(function(){
            		$("#one").fadeIn(1000);
            	},2000)
            	setTimeout(function(){
            		$("#two").fadeIn(1000);
            	},3000)
            	setTimeout(function(){
            		$("#three").fadeIn(1000);
            	},4000)
            	setTimeout(function(){
            		$("#four").fadeIn(1000);
            	},5000)
        	for(let j=0;j<12;j++){
        		let smf=document.createElement("div");
        		smf.style.background=randomColor();
        		smf.className="smallfire";
        		smf.style.left=json2[i].left+"px";
        		smf.style.top=json2[i].top+"px";
        		that.oCont.appendChild(smf);
        	var lt = Math.round(Math.cos(Math.PI/180*30*j)*r) + json2[i].left; //小烟花成圆形运动
			var tp = Math.round(Math.sin(Math.PI/180*30*j)*r) + json2[i].top;
			move(smf,{"left":lt,"top":tp},function(){
				
				smf.remove();
			})
            }
					},1000)
		  }
			},500)
        }
           
			

	</script>
</html>
